<!doctype html>
<html lang=“pt-br”>
	<head>
		<meta charset=“UTF-8”>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Curso de Javascript</title>
		
		<style type="text/css">
			#dvQuemComeca{
				font-family: Verdana, Geneva, Tahoma, sans-serif; /*Arial, Helvetica, sans-serif;*/
				font-weight: bold;
			}
			#dvjogo{
				width:160px;
				height: 160px;
				display: flex;
				flex-wrap: wrap;
				align-content: flex-start;
			}
			.posjogo{
				width:50px;
				height:50px;
				margin:0px;
				padding:0px;
				cursor:pointer;
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 40pt;
				font-family: Verdana, Geneva, Tahoma, sans-serif; /*Arial, Helvetica, sans-serif;*/
				font-weight: bold;
			}
			#p1{
				border-right: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p2{
				border-left: 1px solid #000;
				border-right: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p3{
				border-left: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p4{
				border-top: 1px solid #000;
				border-right: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p5{
				border-top: 1px solid #000;
				border-left: 1px solid #000;
				border-right: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p6{
				border-top: 1px solid #000;
				border-left: 1px solid #000;
				border-bottom: 1px solid #000;
			}
			#p7{
				border-top: 1px solid #000;
				border-right: 1px solid #000;
			}
			#p8{
				border-top: 1px solid #000;
				border-left: 1px solid #000;
				border-right: 1px solid #000;
			}
			#p9{
				border-top: 1px solid #000;
				border-left: 1px solid #000;
			}
		</style>

		<script>
			
			let jogo;
			let tabuleiro=[];
			let quemJoga=0; //0-Jogador 1-CPU
			let verifica;
			let jogando=true;
			let nivel=2;
			let jogadaCPU=1;
			let quemComeca=1;
			let jogada=0;

			function cpuJoga(){
				if(jogando){
					let l,c;
					if(nivel==1){
						do{
							l=Math.round(Math.random()*2)
							c=Math.round(Math.random()*2)
						}while(jogo[l][c]!="");
						jogo[l][c]="O";
					} else if(nivel==2){
						//NIVEL 2
						//ATAQUE
						//Jogadas linha 1
						if((jogo[0][0]=="O")&&(jogo[0][1]=="O")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else if((jogo[0][0]=="O")&&(jogo[0][2]=="O")&&(jogo[0][1]=="")){
							jogo[0][1]="O";
						} else if((jogo[0][1]=="O")&&(jogo[0][2]=="O")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas linha 2
						if((jogo[1][0]=="O")&&(jogo[1][1]=="O")&&(jogo[1][2]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][0]=="O")&&(jogo[1][2]=="O")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="O")&&(jogo[1][2]=="O")&&(jogo[1][0]=="")){
							jogo[1][0]="O";
						} else
						//Jogadas linha 3
						if((jogo[2][0]=="O")&&(jogo[2][1]=="O")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[2][0]=="O")&&(jogo[2][2]=="O")&&(jogo[2][1]=="")){
							jogo[2][1]="O";
						} else if((jogo[2][1]=="O")&&(jogo[2][2]=="O")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else
						//Jogadas coluna 1
						if((jogo[0][0]=="O")&&(jogo[1][0]=="O")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else if((jogo[0][0]=="O")&&(jogo[2][0]=="O")&&(jogo[1][0]=="")){
							jogo[1][0]="O";
						} else if((jogo[1][0]=="O")&&(jogo[2][1]=="O")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas coluna 2
						if((jogo[0][1]=="O")&&(jogo[1][1]=="O")&&(jogo[2][1]=="")){
							jogo[2][1]="O";
						} else if((jogo[0][1]=="O")&&(jogo[2][1]=="O")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="O")&&(jogo[2][1]=="O")&&(jogo[0][1]=="")){
							jogo[0][1]="O";
						} else
						//Jogadas coluna 3
						if((jogo[0][2]=="O")&&(jogo[1][2]=="O")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[0][2]=="O")&&(jogo[2][2]=="O")&&(jogo[1][2]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][2]=="O")&&(jogo[2][2]=="O")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else
						//Jogadas diagonal 1
						if((jogo[0][0]=="O")&&(jogo[1][1]=="O")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[0][0]=="O")&&(jogo[2][2]=="O")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="O")&&(jogo[2][2]=="O")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas diagonal 2
						if((jogo[0][2]=="O")&&(jogo[1][1]=="O")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else if((jogo[0][2]=="O")&&(jogo[2][0]=="O")&&(jogo[1][1]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][1]=="O")&&(jogo[2][0]=="O")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else
						//DEFESA
						//Jogadas linha 1
						if((jogo[0][0]=="X")&&(jogo[0][1]=="X")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else if((jogo[0][0]=="X")&&(jogo[0][2]=="X")&&(jogo[0][1]=="")){
							jogo[0][1]="O";
						} else if((jogo[0][1]=="X")&&(jogo[0][2]=="X")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas linha 2
						if((jogo[1][0]=="X")&&(jogo[1][1]=="X")&&(jogo[1][2]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][0]=="X")&&(jogo[1][2]=="X")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="X")&&(jogo[1][2]=="X")&&(jogo[1][0]=="")){
							jogo[1][0]="O";
						} else
						//Jogadas linha 3
						if((jogo[2][0]=="X")&&(jogo[2][1]=="X")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[2][0]=="X")&&(jogo[2][2]=="X")&&(jogo[2][1]=="")){
							jogo[2][1]="O";
						} else if((jogo[2][1]=="X")&&(jogo[2][2]=="X")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else
						//Jogadas coluna 1
						if((jogo[0][0]=="X")&&(jogo[1][0]=="X")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else if((jogo[0][0]=="X")&&(jogo[2][0]=="X")&&(jogo[1][0]=="")){
							jogo[1][0]="O";
						} else if((jogo[1][0]=="X")&&(jogo[2][1]=="X")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas coluna 2
						if((jogo[0][1]=="X")&&(jogo[1][1]=="X")&&(jogo[2][1]=="")){
							jogo[2][1]="O";
						} else if((jogo[0][1]=="X")&&(jogo[2][1]=="X")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="X")&&(jogo[2][1]=="X")&&(jogo[0][1]=="")){
							jogo[0][1]="O";
						} else
						//Jogadas coluna 3
						if((jogo[0][2]=="X")&&(jogo[1][2]=="X")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[0][2]=="X")&&(jogo[2][2]=="X")&&(jogo[1][2]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][2]=="X")&&(jogo[2][2]=="X")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else
						//Jogadas diagonal 1
						if((jogo[0][0]=="X")&&(jogo[1][1]=="X")&&(jogo[2][2]=="")){
							jogo[2][2]="O";
						} else if((jogo[0][0]=="X")&&(jogo[2][2]=="X")&&(jogo[1][1]=="")){
							jogo[1][1]="O";
						} else if((jogo[1][1]=="X")&&(jogo[2][2]=="X")&&(jogo[0][0]=="")){
							jogo[0][0]="O";
						} else
						//Jogadas diagonal 2
						if((jogo[0][2]=="X")&&(jogo[1][1]=="X")&&(jogo[2][0]=="")){
							jogo[2][0]="O";
						} else if((jogo[0][2]=="X")&&(jogo[2][0]=="X")&&(jogo[1][1]=="")){
							jogo[1][2]="O";
						} else if((jogo[1][1]=="X")&&(jogo[2][0]=="X")&&(jogo[0][2]=="")){
							jogo[0][2]="O";
						} else {
							if(jogada<8){
								do{
								l=Math.round(Math.random()*2)
								c=Math.round(Math.random()*2)
								}while(jogo[l][c]!="");
								jogo[l][c]="O";
							} else {
								for(let l=0; l<3; l++){
									for(let c=0; c<3; c++){
										if(jogo[l][c]==""){
											jogo[l][c]="O";
										}
									}
								}
							}
						}
					}
					verifica=verVitoria();
					atualizaTabuleiro();
					if(verifica!=""){
						alert(verifica+" venceu")
						jogando=false;
					}
					quemJoga=0;
					jogada++;
				}
			}

			function verVitoria(){
				let l, c;
				//LINHAS
				for(l=0; l<3; l++){
					if((jogo[l][0]==jogo[l][1])&&(jogo[l][1]==jogo[l][2])){
						return jogo[l][1];
					}
				}
				//COLUNAS
				for(c=0; c<3; c++){
					if((jogo[0][c]==jogo[1][c])&&(jogo[1][c]==jogo[2][c])){
						return jogo[1][c];
					}
				}
				//DIAGONAIS
				if((jogo[0][0]==jogo[1][1])&&(jogo[1][1]==jogo[2][2])){
					return jogo[1][1];
				}
				if((jogo[0][2]==jogo[1][1])&&(jogo[1][1]==jogo[2][0])){
					return jogo[1][1]
				}
				return "";
			}

			function jogar(p){
				if((jogando)&&(quemJoga==0)){
					switch(p){
						case 1:
							if(jogo[0][0]==""){
								jogo[0][0]="X";
								quemJoga=1;
							}
						break;
						case 2:
							if(jogo[0][1]==""){
								jogo[0][1]="X";
								quemJoga=1;
							}
						break;
						case 3:
							if(jogo[0][2]==""){
								jogo[0][2]="X";
								quemJoga=1;
							}
						break;
						case 4:
							if(jogo[1][0]==""){
								jogo[1][0]="X";
								quemJoga=1;
							}
						break;
						case 5:
							if(jogo[1][1]==""){
								jogo[1][1]="X";
								quemJoga=1;
							}
						break;
						case 6:
							if(jogo[1][2]==""){
								jogo[1][2]="X";
								quemJoga=1;
							}
						break;
						case 7:
							if(jogo[2][0]==""){
								jogo[2][0]="X";
								quemJoga=1;
							}
						break;
						case 8:
							if(jogo[2][1]==""){
								jogo[2][1]="X";
								quemJoga=1;
							}
						break;
						default: //case 9
							if(jogo[2][2]==""){
								jogo[2][2]="X";
								quemJoga=1;
							}
						break;
					}
					if(quemJoga==1){
						atualizaTabuleiro()
						verifica=verVitoria();
						if(verifica!=""){
							alert(verifica+" venceu")
							jogando=false;
						}
						jogada++;
						cpuJoga();
					}
				}

			}

			function atualizaTabuleiro(){
				for (let l=0; l<3; l++){
					for (let c=0; c<3; c++){
						if(jogo[l][c]=="X"){
							tabuleiro[l][c].innerHTML="X";
							tabuleiro[l][c].style.cursor="default";

						} else if(jogo[l][c]=="O"){
							tabuleiro[l][c].innerHTML="O";
							tabuleiro[l][c].style.cursor="default";
							
						} else {
							tabuleiro[l][c].innerHTML="";
							tabuleiro[l][c].style.cursor="pointer";
						}
					}
				}
			}

			function iniciar(){
				jogando=true;
				jogada=0;
				jogadaCPU=1;
				jogo=[["","",""],["","",""],["","",""]];
				tabuleiro=[[document.getElementById("p1"),document.getElementById("p2"),document.getElementById("p3")],[document.getElementById("p4"),document.getElementById("p5"),document.getElementById("p6")],[document.getElementById("p7"),document.getElementById("p8"),document.getElementById("p9")]];
				atualizaTabuleiro();
				if(quemComeca==1){
					quemComeca=0;
					quemJoga=quemComeca;
					document.getElementById("dvQuemComeca").innerHTML="Quem inicia o jogo é o Jogador"
				} else {
					quemComeca=1;
					quemJoga=quemComeca;
					document.getElementById("dvQuemComeca").innerHTML="Quem inicia o jogo é o Computador"
					cpuJoga();
				}
			}


			window.addEventListener("load",iniciar)
		</script>
	</head>
	<body>

		<div id="dvmenu">
			<div id="dvQuemComeca">Quem inicia o jogo é ...</div>
			<button onclick="iniciar()">Iniciar Jogo</button>
		</div>
		<div id="dvjogo">
			<div id="p1" class="posjogo" onclick="jogar(1)"></div>
			<div id="p2" class="posjogo" onclick="jogar(2)"></div>
			<div id="p3" class="posjogo" onclick="jogar(3)"></div>
			<div id="p4" class="posjogo" onclick="jogar(4)"></div>
			<div id="p5" class="posjogo" onclick="jogar(5)"></div>
			<div id="p6" class="posjogo" onclick="jogar(6)"></div>
			<div id="p7" class="posjogo" onclick="jogar(7)"></div>
			<div id="p8" class="posjogo" onclick="jogar(8)"></div>
			<div id="p9" class="posjogo" onclick="jogar(9)"></div>
		</div>
	</body>
</html>